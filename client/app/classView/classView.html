<template name="classView">
{{#with class}}
	<div class="container-fluid">
		{{#unless isPhone}}
			<div class="row classHeader" style="background-color: {{__color}}; border-color: {{classBorderColor}}; color: {{textColor __color}}">
				<div class="robotoHeader overviewHeader" id="classHeader">
					{{name}}
					<span id="changeClassIcon" class="fa fa-pencil"></span>
				</div>
				<div class="robotoHeader overviewHeader" style="position: absolute; top: 0; right: 10px; text-align: right">{{tasksAmount}} <span class="robotoThin" style="margin-left: 5px">{{tasksWord}}</span></div>
			</div>
		{{/unless}}
		<!--<div class="divider" style="border-color: {{__color}}"></div>-->
		{{#with nextLessonDate}}
			VOLGENDE LES IS DAN: {{dateFormat 'dddd D MMMM' this}}<br>
		{{/with}}
		<!--VOLGENDE TOETS IS DAN: {{dateFormat 'D MMMM' nextTestDate}}<br>-->
		Je docent: <a href="#">Malle Henk</a>
		<div class="gradeInfoContainer">
			{{#if Template.subscriptionsReady}}
				{{#if hasGrades}}
					{{#with endGrade}}
						{{> endGradeTemplate}}
					{{else}}
						<div class="gradeContainerEndGrade">
							<div class="gradeSquare">?</div>
							<div class="endGradeHint">Gemiddelde</div>
						</div>
					{{/with}}

					<div class="gradeContainer">
						{{#each gradeGroups}}
							{{> gradeGroup}}
						{{/each}}
					</div>

					{{#with selectedGrade}}
						{{> gradeDetail}}
					{{/with}}
				{{else}}
					<div class="notice">
						Geen cijfers gevonden.
					</div>
				{{/if}}
			{{else}}
				<div class="notice">
					Cijfers laden...
				</div>
			{{/if}}
		</div>
		<div class="row">
			<div class="col-sm-6">
				<div class="itemContainer studyUtils">
					<div class="robotoThin itemContainerHeader">
						Studiewijzers
					</div>
					<div class="itemContainerContent">
						{{#each studyUtils}}
							{{> studyUtil}}
						{{/each}}
					</div>
				</div>
			</div>
			<div class="col-sm-6">
				<div class="itemContainer digitalSchoolUtilities">
					<div class="robotoThin itemContainerHeader">
						Leermiddelen
					</div>
					<div class="itemContainerContent">
						{{#each digitalSchoolUtilities}}
							{{> digitalSchoolUtility}}
						{{/each}}
					</div>
				</div>
			</div>
		</div>
	</div>
{{else}}
	{{> loading}}
{{/with}}
</template>

<template name="gradeGroup">
	<div class="gradeGroup">
		<div class="gradeGroupName"><span>{{name}}</span></div><div class="gradeGroupDivider"></div>
		{{#each grades}}
			{{> gradeRow}}
		{{/each}}
	</div>
</template>

<template name="gradeRow">
	<div class="gradeRow {{selected}} {{__insufficient}}">
		<span id="grade">{{__grade}}</span> <span id="weight">{{weight}}</span>
	</div>
</template>

<template name="gradeDetail">
	<div class="gradeContainerGradeDetail">
		<div class="gradeSquare {{__insufficient}}">{{__grade}}</div>
		<div class="gradeInfoRow"><div>Beschrijving</div> {{description}}</div>
		<div class="gradeInfoRow"><div>Gewicht</div> {{weight}}</div>
	</div>
</template>

<template name="endGradeTemplate">
	<div class="gradeContainerEndGrade {{__insufficient}}">
		<div class="gradeSquare {{__insufficient}}">{{__grade}}</div>
		<div class="endGradeHint">Gemiddelde</div>
	</div>
</template>

<template name="studyUtil">
	<div class="studyUtil">
		<div class="studyUtilName">
			<span>{{name}}</span>
		</div>
		{{#each parts}}
			<div class="studyUtilPart">
				{{name}}
				<div class="studyUtilPartDescription">{{description}}</div>
				{{#each files}}
					<a href="{{url}}" target="_blank">
						<div class="studyUtilPartFile">
							{{name}}
						</div>
					</a>
				{{/each}}
			</div>
		{{/each}}
	</div>
</template>

<template name="digitalSchoolUtility">
	<a href="{{url}}" target="_blank">
		<div class="digitalSchoolUtility">{{name}}</div>
	</a>
</template>

<template name="changeClassModal">
	<div class="modal fade" aria-hidden="true" id="changeClassModal">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
					<h4 class="modal-title">{{name}}</h4>
				</div>
				<div class="modal-body">
					<form class="form-horizontal">
						<div id="changeBookGroup" class="form-group">
							<label for="changeBookInput" class="col-sm-2 control-label" style="text-align: left">Methode</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="changeBookInput" value="{{__book.title}}">
							</div>
						</div>
					</form>
					<button class="btn btn-danger" id="hideClassButton">Verberg vak</button>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Annuleren</button>
					<button type="button" class="btn btn-primary" id="goButton">Opslaan</button>
				</div>
			</div>
		</div>
	</div>
</template>
